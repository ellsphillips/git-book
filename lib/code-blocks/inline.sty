\newlength{\charwidth}
\setlength{\charwidth}{1em}

\newcommand*{\codeinline}[2][0]{%
	\pgfmathparse{#1}%
	\edef\codebgtrim{\pgfmathresult}%
	\hspace*{-0.5\charwidth}\tikz[baseline=(code.base)]{%
		\node[] (code) {%
			\lstinline[%
				backgroundcolor=\color{code-background},%
				language=monokai-typescript,%
				keepspaces=true,%
				basicstyle=\normalsize\ttfamily\bfseries\color{white},%
			]{#2}%
		};%
	%
		\begin{pgfonlayer}{background}%
			\node[anchor=south west] (code-mirror) at ([xshift=6pt]code.south west) {%
				\normalsize\ttfamily\bfseries\color{white}#2%
			};%
		%
			\fill[background-400]
			(code-mirror.north west)%
			rectangle%
			(code-mirror.south east);%
		%
			\fill[%
				code-background,%
				draw=none,%
				rounded corners=2pt,%
				inner sep=3pt,%
			]%
			([shift={(0pt, 0)}]code-mirror.north west)%
			rectangle%
			([shift={(-\codebgtrim\charwidth, 0)}]code-mirror.south east);%
		\end{pgfonlayer}%
	}\hspace*{-0.25\charwidth}
}
